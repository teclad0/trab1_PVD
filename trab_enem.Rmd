---
title: "trab1"
output: html_document
date: '2022-04-01'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Descrição do conjunto
i) local onde foi obtido, (iii) contexto do conjunto de dados, (iii) dicionário dos dados
(descrição de cada coluna), e (iv) tipos de dado de cada atributo.
[] TODO

# Inicialização
```{r}
library(tidyverse)

```


# Importação
A ingestão dos dados foi realizada pegando uma porção dos conjuntos de dados pois este é muito grande para ser importado e processado.
```{r}
file <- 'enem/DADOS/MICRODADOS_ENEM_2020.csv'
enem.df <- read_delim(file, n_max = 1000000, delim=";", col_names = TRUE)
```
# Pré-Processamento

## Verificação de possíveis atributos redundantes
Para o calculo de covariancia, é necessário dropar colunas com valores constantes e tratar casos com desvio padrão 0 e com valores NA. 
```{r}
enem.df_numeric <- as.data.frame(enem.df %>% select(where(is.numeric), -NU_ANO))

cor_fun<- function(x,y){
  val <- tryCatch(cor(x, y), error = function(e) e, warning = function(w) w)
  if (any(class(val) %in% c("simpleWarning", "warning"))) {
    return(mean(x))
  } else {
    return(val)
  }
}

medidas <- function(vetor1,vetor2){
  corr_medida <- cor_fun(vetor1,vetor2)
  det_medida <- cor_fun(vetor1,vetor2) ^2
  lista_medidas <- list("correlacao"= corr_medida, "determinacao"= det_medida)
  lista_medidas
}

calculo_redundante <- function(dados){
  for (col1 in colnames(dados)) {
    for(col2 in colnames(dados)){
      if (col1 == col2) {
        next
      }
      li_med <- medidas(dados[,col1], dados[,col2])
      
      #Retornar apenas atributos com valores relevantes
      if(!is.na(li_med$correlacao) & !is.na(li_med$determinacao)){
      if(li_med$correlacao > 0.7 | li_med$correlacao < -0.7 | li_med$determinacao > 0.7){
          print(paste(col1, "::", col2))
          print(paste(li_med))
        
      }
        }
      
      }
    }
  }

calculo_redundante(enem.df_numeric)


```
Através do resultado, é possível observar que os atributos TP_PRESENCA_CH e  TP_PRESENCA_LC, TP_PRESENCA_MT e TP_PRESENCA_CN possuem r e R² iguais a um. Isso significa que todos os valores são exatamente iguais. Essa situação faz sentido pois as provas de linguagens e códigos e ciências humanas, e ciencias da natureza e matemática são realizadas no mesmo dia.





